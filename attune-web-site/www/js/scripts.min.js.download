function resizeEnd() {
    new Date - resizeStart < delay ? setTimeout(resizeEnd, delay) : (timeout = !1, vtScripts.global.imageTextOverlay(), vtScripts.navigation.scrollSecondaryNav(), vtScripts.navigation.setSecondaryNavWidth(), vtScripts.navigation.setStickyTopMenuOffset(), vtScripts.checkout.init())
}
var vtScripts = {
    checkout: {
        init: function() {
            vtScripts.checkout.scrollCheckoutSummary(), vtScripts.checkout.setCheckoutSummaryWidth()
        },
        scrollCheckoutSummary: function() {
            if ($("#v65-checkoutCartSummaryWrapper, #v65-signUpClubSummaryWrapper").length) {
                $("#v65-checkoutCartSummaryWrapper, #v65-signUpClubSummaryWrapper").addClass("checkout-summary");
                var t = $(".checkout-summary").offset().top,
                    e = $(".checkout-summary").outerHeight(!0);
                $(window).resize(function() {
                    vtScripts.checkout.setCheckoutSummaryWidth()
                }), $(window).scroll(function() {
                    if (!($(document).width() < 640 || $(window).height() < e)) {
                        var o = $(window).scrollTop(),
                            i = t - o,
                            a = $("#v65-checkoutFooter").offset().top - e - 80;
                        $(window).scrollTop() >= a && $(".checkout-summary").addClass("max-scroll"), $(window).scrollTop() <= a && $(".checkout-summary").removeClass("max-scroll"), 60 >= i && !$(".checkout-summary.active").length && $(".checkout-summary").addClass("active"), i > 20 && $(".checkout-summary.active").length && $(".checkout-summary").removeClass("active")
                    }
                })
            }
        },
        setCheckoutSummaryWidth: function() {
            var t = $("#v65-checkoutCartSummaryWrapper, #v65-signUpClubSummaryWrapper"),
                e = $(".checkout-summary").outerHeight(!0);
            if (!(!t.length || $(document).width() < 640 || $(window).height() < e)) {
                t.hasClass("fixed-size") && t.removeAttr("style");
                var o = t.offset().left,
                    i = t.outerWidth();
                t.css({
                    left: o,
                    width: i
                }).addClass("fixed-size")
            }
        }
    },
    cookies: function(t, e, o) {
        if (void 0 === e) {
            var i = "; " + window.document.cookie,
                a = i.split("; " + t + "=");
            return 2 === a.length ? a.pop().split(";").shift() : null
        }
        e === !1 && (o = -1);
        var n;
        if (o) {
            var r = new Date;
            r.setTime(r.getTime() + 24 * o * 60 * 60 * 1e3), n = "; expires=" + r.toGMTString()
        } else n = "";
        window.document.cookie = t + "=" + e + n + "; path=/"
    },
    global: {
        init: function() {
            vtScripts.global.addButtonListener(), vtScripts.global.addToCartListener(), vtScripts.global.closeModal(), vtScripts.global.continueShopping(), vtScripts.global.imageTextOverlay(), vtScripts.global.removeEmptyTags(), vtScripts.global.touchDetection(), vtScripts.global.navHover(), vtScripts.global.preventScrollOnAddToCart()
        },
        addButtonListener: function() {
            document.addEventListener && document.addEventListener("touchstart", function() {}, !0)
        },
        addToCartListener: function() {
            $("[v65js=addToCart]").on("submit", function() {
                vtScripts.cookies("continueShoppingURL", window.location.href)
            })
        },
        addCacheIFrame: function() {
            $("body").append('<iframe src="/cache.html" style="position:absolute;bottom:-999em;visibility:hidden"></iframe>')
        },
        checkCache: function() {
            vtScripts.global.addCacheIFrame()
        },
        continueShopping: function() {
            null !== vtScripts.cookies("continueShoppingURL") && $(".v65-cartCheckOutButtons a.linkAltBtn, #v65-checkCartSummaryMoreOptions a:contains('Continue shopping')").attr("href", vtScripts.cookies("continueShoppingURL"))
        },
        removeEmptyTags: function() {
            $("p").each(function() {
                0 === $(this).html().replace(/\s|&nbsp;|<!--.*-->/g, "").length && $(this).remove()
            })
        },
        closeModal: function() {
            $(window).on("click", "#v65-modalViel", function() {
                vin65.modal.closeWindow()
            })
        },
        imageTextOverlay: function() {
            $(".image-text-overlay").length && $(".image-text-overlay").each(function() {
                var t = $(this),
                    e = -1 * t.find(".details").outerHeight(!0);
                t.find(".text-wrapper").css("bottom", e)
            })
        },
        preventScrollOnAddToCart: function() {
            $("[v65js=addToCart]").on("submit", function() {
                $(window).width() >= 640 && $("html,body").stop()
            })
        },
        touchDetection: function() {
            ("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch) && ($("body").addClass("touch-enabled"), vtScripts.global.showDropdownForTouchDevices())
        },
        showDropdownForTouchDevices: function() {
            $("body").hasClass("touch-enabled") && ($("nav ul ul").parent("li").addClass("dropdown"), $(".dropdown > a").click(function(t) {
                $(this).hasClass("clicked") || $(".mobile-nav-active") || (t.preventDefault(), $(this).addClass("clicked"))
            }))
        },
        navHover: function() {
            $("nav li li a").hover(function() {
                $(this).parents("li").last().toggleClass("hover")
            })
        }
    },
    loadJS: function(t, e) {
        "use strict";
        var o = window.document.getElementsByTagName("script")[0],
            i = window.document.createElement("script");
        return i.src = t, i.async = !0, o.parentNode.insertBefore(i, o), e && "function" == typeof e && (i.onload = e), i
    },
    navigation: {
        init: function() {
            vtScripts.navigation.toggleMobileNav(), vtScripts.navigation.scrollToLink(), vtScripts.navigation.scrollSecondaryNav(), vtScripts.navigation.setSecondaryNavWidth(), vtScripts.navigation.setStickyTopMenuOffset(), vtScripts.navigation.stickyTopMenu()
        },
        toggleMobileNav: function() {
            $(".mobile-nav-toggle").click(function() {
                $("body, .primary-navigation-wrapper").toggleClass("mobile-nav-active"), $(".account-name").removeClass("active")
            })
        },
        scrollToLink: function() {
            $(window).on("click", "a[href^=#]", function(t) {
                t.preventDefault();
                var e = $(this),
                    o = e.attr("href"),
                    i = $(o).offset().top,
                    a = i;
                $("html, body").animate({
                    scrollTop: a
                }, 500, "swing")
            })
        },
        scrollSecondaryNav: function() {
            if ($(".secondary-navigation").length) {
                var t = $(".secondary-navigation").outerHeight(!0);
                $(window).resize(function() {
                    vtScripts.navigation.setSecondaryNavWidth()
                }), $(window).scroll(function() {
                    if (!($(document).width() < 640 || $(window).height() < t)) {
                        var e = $(window).scrollTop(),
                            o = $("header").outerHeight(),
                            i = o - e,
                            a = $("footer").offset().top - t;
                        $(window).scrollTop() >= a && $(".secondary-navigation").addClass("max-scroll"), $(window).scrollTop() <= a && $(".secondary-navigation").removeClass("max-scroll"), 0 >= i && !$(".secondary-navigation.active").length && $(".secondary-navigation").addClass("active"), i > 0 && $(".secondary-navigation.active").length && $(".secondary-navigation").removeClass("active")
                    }
                })
            }
        },
        setSecondaryNavWidth: function() {
            var t = $(".secondary-navigation"),
                e = t.outerHeight();
            $(document).width() < 640 && t.hasClass("fixed-size") && t.removeAttr("style").removeClass("fixed-size"), !t.length || $(document).width() < 640 || $(window).height() < e || t.removeAttr("style").css({
                width: t.outerWidth(!0) - 1,
                paddingLeft: t.css("padding-left")
            }).addClass("fixed-size")
        },
        setStickyTopMenuOffset: function() {
            var t = $(".logo-nav-lockup").offset().top - $(".user-tools-wrapper").outerHeight();
            $(".logo-nav-lockup.fixedMenu").length ? $(".logo-nav-lockup").removeClass("fixedMenu").data("original-offset", t).addClass("fixedMenu") : $(".logo-nav-lockup").data("original-offset", t)
        },
        stickyTopMenu: function() {
            if (!($(document).width() < 640)) {
                var t = $(window).scrollTop(),
                    e = $(".logo-nav-lockup").data("original-offset"),
                    o = e - t;
                0 >= o && !$(".logo-nav-lockup.fixedMenu").length && $(".logo-nav-lockup").addClass("fixedMenu"), o > 0 && $(".logo-nav-lockup").length && $(".logo-nav-lockup").removeClass("fixedMenu")
            }
        }
    },
    page: {
        init: function() {
            vtScripts.page.initPhotoGallery()
        },
        initPhotoGallery: function() {
            ($("div[v65jsphotogalleryid]").length || $(".header-feature-image").length > 1) && vtScripts.loadJS("/assets/js/slick.min.js", vtScripts.page.triggerGallery())
        },
        triggerGallery: function() {
            void 0 === window.retryCount && (window.retryCount = 0), "function" == typeof $.fn.slick ? ($("div[v65jsphotogalleryid]").length && $("div[v65jsphotogalleryid]").each(function() {
                $(this).vtScriptPhotoGallery()
            }), $(".header-feature-image").length > 1 && ($(".header-feature-image").wrapAll('<div class="header-feature-slider" />'), $(".header-feature-slider").slick({
                pauseOnHover: !1,
                autoplay: !0,
                autoplaySpeed: 5e3
            }))) : window.retryCount < 20 && (window.retryCount++, setTimeout(vtScripts.page.triggerGallery, 200))
        }
    },
    products: {
        init: function() {
            vtScripts.products.productGroupAnchors(), vtScripts.products.wrapTitleVintage()
        },
        productGroupAnchors: function() {
            $(".v65-productGroup-title").length && $(".v65-productGroup-title").each(function() {
                var t = $(this),
                    e = t.text().replace(/[^a-zA-Z0-9-_]/g, "-").toLowerCase();
                t.attr("id", e)
            })
        },
        wrapTitleVintage: function() {
           /* $(".v65-product-title a").length && $(".v65-product-title a").each(function() {
                var t = /(\d{4}|N\/?V)/,
                    e = $(this).text(),
                    o = t.exec(e),
                    i = "",
                    a = "";
                o && (i = e.split(o[0]).filter(Boolean).join("").trim(), a = '<span class="product-vintage">' + o[0] + '</span><span class="product-title">' + i + "</span>"), a && $(this).html(a)
            })*/
        }
    },
    userTools: {
        init: function() {
            vtScripts.userTools.setAccountLink()
        },
        setAccountLink: function() {
            var t = $(".v65-login a"),
                e = $(".v65-editProfile a"),
                o = null;
            t.length && $(".account-name").replaceWith(t), e.length && (o = e.text().split("Hello ")[1]), e.length && $(".account-name").text(o)
        }
    }
};
! function($, t) {
    $.fn.vtScriptPhotoGallery = function(e) {
        var o = {
                dots: !0,
                galleryId: $(this).attr("v65jsphotogalleryid"),
                timestamp: "&timestamp=" + (new Date).getTime(),
                autoplay: !0,
                autoplaySpeed: 3e3,
                draggable: !0,
                infinite: !0,
                pauseOnHover: !0,
                slidesToShow: 1,
                lazyLoad: "ondemand",
                arrows: !0
            },
            i = $(this),
            a = $.extend(o, e),
            n = "",
            r = "";
        a.galleryId ? (i.html(""), $.ajax({
            type: "GET",
            url: "/index.cfm?method=pages.showPhotoGalleryXML&photogalleryid=" + a.galleryId + o.timestamp,
            dataType: "xml",
            success: function(t) {
                var e = "";
                $(t).find("img").each(function(t) {
                    var o = "/assets/images/photogallery/images",
                        i = o + "/large/",
                        a = $(this).attr("link"),
                        n = $(this).attr("src"),
                        r = $(this).attr("title");
                    e += a ? '<div class="vt-gallery-image"><a href="' + a + '">' : '<div class="vt-gallery-image">', e += 0 === t ? '<img src="' + i + n + '" title="' + r + '" />' : '<img data-lazy="' + i + n + '" title="' + r + '" />', e += a ? "</a></div>" : "</div>"
                }), i.append(e)
            },
            complete: function() {
                i.attr("v65jsphotogalleryid") !== t && (n = i.attr("v65jsphotogalleryid"), r = $("div[v65jsphotogalleryid=" + n + "]")), r.slick({
                    arrows: a.arrows,
                    autoplay: a.autoplay,
                    autoplaySpeed: a.autoplaySpeed,
                    dots: a.dots,
                    draggable: a.draggable,
                    infinite: a.infinite,
                    pauseOnHover: a.pauseOnHover,
                    slidesToShow: a.slidesToShow,
                    lazyLoad: a.lazyLoad
                })
            }
        })) : i.slick({
            arrows: a.arrows,
            autoplay: a.autoplay,
            autoplaySpeed: a.autoplaySpeed,
            dots: a.dots,
            draggable: a.draggable,
            infinite: a.infinite,
            pauseOnHover: a.pauseOnHover,
            slidesToShow: a.slidesToShow
        })
    }
}(jQuery), $(window).load(function() {
    if ($("#v65-checkoutCartSummaryWrapper, #v65-signUpClubSummaryWrapper").length) {
        var t = $(window).scrollTop(),
            e = $("header").outerHeight(),
            o = $(".checkout-summary").offset().top - (t + e);
        0 >= o && $(".checkout-summary").addClass("active");
        var i = $("#v65-checkoutFooter").offset().top - $(".checkout-summary").outerHeight(!0) - 80;
        $(window).scrollTop() >= i && $(".checkout-summary").addClass("max-scroll")
    }
});
var resizeStart = new Date,
    timeout = !1,
    delay = 200;
$(window).resize(function() {
    resizeStart = new Date, timeout === !1 && (timeout = !0, setTimeout(resizeEnd, delay))
}).scroll(function() {
    vtScripts.navigation.stickyTopMenu()
}).load(function() {
    vtScripts.global.preventScrollOnAddToCart()
}), vtScripts.userTools.init(), vtScripts.global.init(), vtScripts.navigation.init(), vtScripts.page.init(), vtScripts.products.init(), vtScripts.checkout.init();